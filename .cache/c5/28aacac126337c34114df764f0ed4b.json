{"id":"zjiE","dependencies":[{"name":"/mnt/h/CODE/Soundthesia/package.json","includedInParent":true,"mtime":1603141765409},{"name":"/mnt/h/CODE/Soundthesia/.babelrc","includedInParent":true,"mtime":1603141725843},{"name":"/mnt/h/CODE/Soundthesia/node_modules/bpm-detective/package.json","includedInParent":true,"mtime":1603141811835}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=t;var n=window.OfflineAudioContext||window.webkitOfflineAudioContext;function t(n){var t=r(n);return t.start(0),[o,f,i(n.sampleRate),e].reduce(function(n,t){return t(n)},t.buffer.getChannelData(0))}function e(n){return n.sort(function(n,t){return t.count-n.count}).splice(0,5)[0].tempo}function r(t){var e=t.length,r=t.numberOfChannels,o=t.sampleRate,u=new n(r,e,o),f=u.createBufferSource();f.buffer=t;var i=u.createBiquadFilter();return i.type=\"lowpass\",f.connect(i),i.connect(u.destination),f}function o(n){for(var t=[],e=.9;t.length<15&&e>=.3;)t=u(n,e),e-=.05;if(t.length<15)throw new Error(\"Could not find enough samples for a reliable detection.\");return t}function u(n,t){for(var e=[],r=0,o=n.length;r<o;r+=1)n[r]>t&&(e.push(r),r+=1e4);return e}function f(n){var t=[];return n.forEach(function(e,r){for(var o=function(o){var u=n[r+o]-e;t.some(function(n){if(n.interval===u)return n.count+=1})||t.push({interval:u,count:1})},u=0;u<10;u+=1)o(u)}),t}function i(n){return function(t){var e=[];return t.forEach(function(t){if(0!==t.interval){for(var r=60/(t.interval/n);r<90;)r*=2;for(;r>180;)r/=2;r=Math.round(r),e.some(function(n){if(n.tempo===r)return n.count+=t.count})||e.push({tempo:r,count:t.count})}}),e}}"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":3,"column":0},"generated":{"line":1,"column":20}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":3,"column":0},"generated":{"line":1,"column":35}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":3,"column":0},"generated":{"line":1,"column":43}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":3,"column":0},"generated":{"line":1,"column":56}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":4,"column":0},"generated":{"line":1,"column":57}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":4,"column":0},"generated":{"line":1,"column":64}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":6,"column":0},"generated":{"line":1,"column":68}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":6,"column":0},"generated":{"line":1,"column":76}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":6,"column":0},"generated":{"line":1,"column":84}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":7,"column":0},"generated":{"line":1,"column":86}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":7,"column":0},"generated":{"line":1,"column":90}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":7,"column":0},"generated":{"line":1,"column":92}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":7,"column":0},"generated":{"line":1,"column":99}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":7,"column":0},"generated":{"line":1,"column":120}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":7,"column":0},"generated":{"line":1,"column":127}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":15,"column":0},"generated":{"line":1,"column":153}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":15,"column":0},"generated":{"line":1,"column":162}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":15,"column":0},"generated":{"line":1,"column":164}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":16,"column":0},"generated":{"line":1,"column":167}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":16,"column":0},"generated":{"line":1,"column":171}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":16,"column":0},"generated":{"line":1,"column":173}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":16,"column":0},"generated":{"line":1,"column":175}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":178}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":22,"column":0},"generated":{"line":1,"column":185}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":22,"column":0},"generated":{"line":1,"column":187}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":22,"column":0},"generated":{"line":1,"column":193}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":196}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":197}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":199}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":201}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":203}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":205}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":217}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":220}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":227}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":236}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":28,"column":0},"generated":{"line":1,"column":238}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":29,"column":0},"generated":{"line":1,"column":241}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":29,"column":0},"generated":{"line":1,"column":248}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":29,"column":0},"generated":{"line":1,"column":250}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":30,"column":0},"generated":{"line":1,"column":254}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":30,"column":0},"generated":{"line":1,"column":256}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":30,"column":0},"generated":{"line":1,"column":263}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":30,"column":0},"generated":{"line":1,"column":278}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":39,"column":0},"generated":{"line":1,"column":282}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":39,"column":0},"generated":{"line":1,"column":291}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":39,"column":0},"generated":{"line":1,"column":293}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":40,"column":0},"generated":{"line":1,"column":296}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":40,"column":0},"generated":{"line":1,"column":303}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":40,"column":0},"generated":{"line":1,"column":305}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":40,"column":0},"generated":{"line":1,"column":310}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":40,"column":0},"generated":{"line":1,"column":319}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":40,"column":0},"generated":{"line":1,"column":321}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":41,"column":0},"generated":{"line":1,"column":324}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":41,"column":0},"generated":{"line":1,"column":331}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":41,"column":0},"generated":{"line":1,"column":333}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":41,"column":0},"generated":{"line":1,"column":339}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":41,"column":0},"generated":{"line":1,"column":341}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":42,"column":0},"generated":{"line":1,"column":349}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":42,"column":0},"generated":{"line":1,"column":356}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":42,"column":0},"generated":{"line":1,"column":358}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":42,"column":0},"generated":{"line":1,"column":361}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":42,"column":0},"generated":{"line":1,"column":364}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":51,"column":0},"generated":{"line":1,"column":370}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":51,"column":0},"generated":{"line":1,"column":379}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":51,"column":0},"generated":{"line":1,"column":381}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":52,"column":0},"generated":{"line":1,"column":384}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":52,"column":0},"generated":{"line":1,"column":388}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":52,"column":0},"generated":{"line":1,"column":390}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":52,"column":0},"generated":{"line":1,"column":392}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":53,"column":0},"generated":{"line":1,"column":399}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":53,"column":0},"generated":{"line":1,"column":401}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":53,"column":0},"generated":{"line":1,"column":403}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":54,"column":0},"generated":{"line":1,"column":420}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":54,"column":0},"generated":{"line":1,"column":422}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":54,"column":0},"generated":{"line":1,"column":424}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":56,"column":0},"generated":{"line":1,"column":435}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":56,"column":0},"generated":{"line":1,"column":437}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":56,"column":0},"generated":{"line":1,"column":441}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":56,"column":0},"generated":{"line":1,"column":443}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":56,"column":0},"generated":{"line":1,"column":445}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":56,"column":0},"generated":{"line":1,"column":447}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":62,"column":0},"generated":{"line":1,"column":450}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":62,"column":0},"generated":{"line":1,"column":452}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":62,"column":0},"generated":{"line":1,"column":454}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":63,"column":0},"generated":{"line":1,"column":475}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":63,"column":0},"generated":{"line":1,"column":477}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":63,"column":0},"generated":{"line":1,"column":484}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":69,"column":0},"generated":{"line":1,"column":486}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":69,"column":0},"generated":{"line":1,"column":490}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":69,"column":0},"generated":{"line":1,"column":492}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":69,"column":0},"generated":{"line":1,"column":494}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":79,"column":0},"generated":{"line":1,"column":515}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":70,"column":0},"generated":{"line":1,"column":522}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":70,"column":0},"generated":{"line":1,"column":524}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":70,"column":0},"generated":{"line":1,"column":529}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":76,"column":0},"generated":{"line":1,"column":539}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":76,"column":0},"generated":{"line":1,"column":541}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":76,"column":0},"generated":{"line":1,"column":549}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":77,"column":0},"generated":{"line":1,"column":552}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":77,"column":0},"generated":{"line":1,"column":554}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":77,"column":0},"generated":{"line":1,"column":562}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":77,"column":0},"generated":{"line":1,"column":564}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":79,"column":0},"generated":{"line":1,"column":577}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":88,"column":0},"generated":{"line":1,"column":579}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":88,"column":0},"generated":{"line":1,"column":588}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":88,"column":0},"generated":{"line":1,"column":590}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":99,"column":0},"generated":{"line":1,"column":593}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":89,"column":0},"generated":{"line":1,"column":597}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":89,"column":0},"generated":{"line":1,"column":601}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":89,"column":0},"generated":{"line":1,"column":603}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":90,"column":0},"generated":{"line":1,"column":606}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":90,"column":0},"generated":{"line":1,"column":608}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":99,"column":0},"generated":{"line":1,"column":611}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":99,"column":0},"generated":{"line":1,"column":613}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":92,"column":0},"generated":{"line":1,"column":620}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":99,"column":0},"generated":{"line":1,"column":624}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":91,"column":0},"generated":{"line":1,"column":627}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":100,"column":0},"generated":{"line":1,"column":631}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":100,"column":0},"generated":{"line":1,"column":633}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":100,"column":0},"generated":{"line":1,"column":635}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":100,"column":0},"generated":{"line":1,"column":637}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":101,"column":0},"generated":{"line":1,"column":640}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":101,"column":0},"generated":{"line":1,"column":643}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":108,"column":0},"generated":{"line":1,"column":647}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":108,"column":0},"generated":{"line":1,"column":650}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":108,"column":0},"generated":{"line":1,"column":652}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":92,"column":0},"generated":{"line":1,"column":659}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":109,"column":0},"generated":{"line":1,"column":662}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":109,"column":0},"generated":{"line":1,"column":668}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":109,"column":0},"generated":{"line":1,"column":672}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":109,"column":0},"generated":{"line":1,"column":678}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":112,"column":0},"generated":{"line":1,"column":737}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":112,"column":0},"generated":{"line":1,"column":744}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":122,"column":0},"generated":{"line":1,"column":746}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":122,"column":0},"generated":{"line":1,"column":755}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":122,"column":0},"generated":{"line":1,"column":757}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":122,"column":0},"generated":{"line":1,"column":759}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":762}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":123,"column":0},"generated":{"line":1,"column":766}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":123,"column":0},"generated":{"line":1,"column":770}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":123,"column":0},"generated":{"line":1,"column":772}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":775}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":777}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":779}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":781}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":783}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":790}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":792}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":794}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":129,"column":0},"generated":{"line":1,"column":797}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":130,"column":0},"generated":{"line":1,"column":799}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":130,"column":0},"generated":{"line":1,"column":801}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":130,"column":0},"generated":{"line":1,"column":804}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":131,"column":0},"generated":{"line":1,"column":808}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":131,"column":0},"generated":{"line":1,"column":810}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":131,"column":0},"generated":{"line":1,"column":815}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":137,"column":0},"generated":{"line":1,"column":818}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":137,"column":0},"generated":{"line":1,"column":821}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":141,"column":0},"generated":{"line":1,"column":826}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":141,"column":0},"generated":{"line":1,"column":833}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":150,"column":0},"generated":{"line":1,"column":835}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":150,"column":0},"generated":{"line":1,"column":844}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":150,"column":0},"generated":{"line":1,"column":846}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":151,"column":0},"generated":{"line":1,"column":849}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":151,"column":0},"generated":{"line":1,"column":853}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":151,"column":0},"generated":{"line":1,"column":855}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":184,"column":0},"generated":{"line":1,"column":858}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":153,"column":0},"generated":{"line":1,"column":865}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":153,"column":0},"generated":{"line":1,"column":867}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":153,"column":0},"generated":{"line":1,"column":875}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":153,"column":0},"generated":{"line":1,"column":884}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":153,"column":0},"generated":{"line":1,"column":886}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":179,"column":0},"generated":{"line":1,"column":889}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":154,"column":0},"generated":{"line":1,"column":893}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":154,"column":0},"generated":{"line":1,"column":897}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":154,"column":0},"generated":{"line":1,"column":899}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":154,"column":0},"generated":{"line":1,"column":908}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":155,"column":0},"generated":{"line":1,"column":911}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":155,"column":0},"generated":{"line":1,"column":915}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":155,"column":0},"generated":{"line":1,"column":917}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":155,"column":0},"generated":{"line":1,"column":919}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":155,"column":0},"generated":{"line":1,"column":921}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":155,"column":0},"generated":{"line":1,"column":924}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":161,"column":0},"generated":{"line":1,"column":926}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":161,"column":0},"generated":{"line":1,"column":928}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":161,"column":0},"generated":{"line":1,"column":933}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":161,"column":0},"generated":{"line":1,"column":942}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":162,"column":0},"generated":{"line":1,"column":945}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":162,"column":0},"generated":{"line":1,"column":948}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":162,"column":0},"generated":{"line":1,"column":950}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":162,"column":0},"generated":{"line":1,"column":961}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":163,"column":0},"generated":{"line":1,"column":963}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":163,"column":0},"generated":{"line":1,"column":970}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":163,"column":0},"generated":{"line":1,"column":972}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":163,"column":0},"generated":{"line":1,"column":979}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":172,"column":0},"generated":{"line":1,"column":984}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":172,"column":0},"generated":{"line":1,"column":986}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":172,"column":0},"generated":{"line":1,"column":991}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":173,"column":0},"generated":{"line":1,"column":992}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":173,"column":0},"generated":{"line":1,"column":1001}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":174,"column":0},"generated":{"line":1,"column":1003}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":174,"column":0},"generated":{"line":1,"column":1009}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":179,"column":0},"generated":{"line":1,"column":1014}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":179,"column":0},"generated":{"line":1,"column":1016}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":179,"column":0},"generated":{"line":1,"column":1018}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":179,"column":0},"generated":{"line":1,"column":1020}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":179,"column":0},"generated":{"line":1,"column":1023}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":179,"column":0},"generated":{"line":1,"column":1026}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":180,"column":0},"generated":{"line":1,"column":1028}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":180,"column":0},"generated":{"line":1,"column":1030}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":184,"column":0},"generated":{"line":1,"column":1035}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":193,"column":0},"generated":{"line":1,"column":1037}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":193,"column":0},"generated":{"line":1,"column":1046}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":193,"column":0},"generated":{"line":1,"column":1048}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":201,"column":0},"generated":{"line":1,"column":1051}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":201,"column":0},"generated":{"line":1,"column":1058}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":201,"column":0},"generated":{"line":1,"column":1067}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":202,"column":0},"generated":{"line":1,"column":1070}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":202,"column":0},"generated":{"line":1,"column":1074}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":202,"column":0},"generated":{"line":1,"column":1076}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":249,"column":0},"generated":{"line":1,"column":1079}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":204,"column":0},"generated":{"line":1,"column":1086}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":204,"column":0},"generated":{"line":1,"column":1088}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":204,"column":0},"generated":{"line":1,"column":1096}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":204,"column":0},"generated":{"line":1,"column":1105}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":205,"column":0},"generated":{"line":1,"column":1108}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":205,"column":0},"generated":{"line":1,"column":1111}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":205,"column":0},"generated":{"line":1,"column":1115}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":205,"column":0},"generated":{"line":1,"column":1117}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":205,"column":0},"generated":{"line":1,"column":1126}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":216,"column":0},"generated":{"line":1,"column":1127}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":210,"column":0},"generated":{"line":1,"column":1131}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":210,"column":0},"generated":{"line":1,"column":1135}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":210,"column":0},"generated":{"line":1,"column":1137}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":210,"column":0},"generated":{"line":1,"column":1141}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":210,"column":0},"generated":{"line":1,"column":1143}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":210,"column":0},"generated":{"line":1,"column":1152}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":216,"column":0},"generated":{"line":1,"column":1155}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":216,"column":0},"generated":{"line":1,"column":1157}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":217,"column":0},"generated":{"line":1,"column":1161}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":217,"column":0},"generated":{"line":1,"column":1164}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":218,"column":0},"generated":{"line":1,"column":1166}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":218,"column":0},"generated":{"line":1,"column":1171}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":218,"column":0},"generated":{"line":1,"column":1173}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":219,"column":0},"generated":{"line":1,"column":1178}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":219,"column":0},"generated":{"line":1,"column":1181}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":224,"column":0},"generated":{"line":1,"column":1183}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":224,"column":0},"generated":{"line":1,"column":1185}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":224,"column":0},"generated":{"line":1,"column":1190}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":224,"column":0},"generated":{"line":1,"column":1196}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":230,"column":0},"generated":{"line":1,"column":1199}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":230,"column":0},"generated":{"line":1,"column":1201}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":230,"column":0},"generated":{"line":1,"column":1206}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":230,"column":0},"generated":{"line":1,"column":1215}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":231,"column":0},"generated":{"line":1,"column":1218}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":231,"column":0},"generated":{"line":1,"column":1221}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":231,"column":0},"generated":{"line":1,"column":1223}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":231,"column":0},"generated":{"line":1,"column":1231}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":232,"column":0},"generated":{"line":1,"column":1233}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":232,"column":0},"generated":{"line":1,"column":1240}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":232,"column":0},"generated":{"line":1,"column":1242}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":232,"column":0},"generated":{"line":1,"column":1249}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":232,"column":0},"generated":{"line":1,"column":1251}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":241,"column":0},"generated":{"line":1,"column":1260}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":241,"column":0},"generated":{"line":1,"column":1262}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":241,"column":0},"generated":{"line":1,"column":1267}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":242,"column":0},"generated":{"line":1,"column":1268}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":242,"column":0},"generated":{"line":1,"column":1274}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":243,"column":0},"generated":{"line":1,"column":1276}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":243,"column":0},"generated":{"line":1,"column":1282}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":243,"column":0},"generated":{"line":1,"column":1284}},{"source":"../node_modules/bpm-detective/lib/detect.js","original":{"line":249,"column":0},"generated":{"line":1,"column":1295}}],"sources":{"../node_modules/bpm-detective/lib/detect.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = detect;\nvar OfflineContext = window.OfflineAudioContext || window.webkitOfflineAudioContext;\n\n/**\n * Detect BPM of a sound source\n * @param  {AudioBuffer} buffer Sound to process\n * @return {Promise}            Resolved to detected BPM\n */\n\nfunction detect(buffer) {\n  var source = getLowPassSource(buffer);\n\n  /**\n   * Schedule the sound to start playing at time:0\n   */\n\n  source.start(0);\n\n  /**\n   * Pipe the source through the program\n   */\n\n  return [findPeaks, identifyIntervals, groupByTempo(buffer.sampleRate), getTopCandidate].reduce(function (state, fn) {\n    return fn(state);\n  }, source.buffer.getChannelData(0));\n}\n\n/**\n * Sort results by count and return top candidate\n * @param  {Object} Candidate\n * @return {Number}\n */\n\nfunction getTopCandidate(candidates) {\n  return candidates.sort(function (a, b) {\n    return b.count - a.count;\n  }).splice(0, 5)[0].tempo;\n}\n\n/**\n * Apply a low pass filter to an AudioBuffer\n * @param  {AudioBuffer}            buffer Source AudioBuffer\n * @return {AudioBufferSourceNode}\n */\n\nfunction getLowPassSource(buffer) {\n  var length = buffer.length,\n      numberOfChannels = buffer.numberOfChannels,\n      sampleRate = buffer.sampleRate;\n\n  var context = new OfflineContext(numberOfChannels, length, sampleRate);\n\n  /**\n   * Create buffer source\n   */\n\n  var source = context.createBufferSource();\n  source.buffer = buffer;\n\n  /**\n   * Create filter\n   */\n\n  var filter = context.createBiquadFilter();\n  filter.type = 'lowpass';\n\n  /**\n   * Pipe the song into the filter, and the filter into the offline context\n   */\n\n  source.connect(filter);\n  filter.connect(context.destination);\n\n  return source;\n}\n\n/**\n * Find peaks in sampleRate\n * @param  {Array} data Bugger channel data\n * @return {Array}      Peaks found that are greater than the threshold\n */\n\nfunction findPeaks(data) {\n  var peaks = [];\n  var threshold = 0.9;\n  var minThresold = 0.3;\n  var minPeaks = 15;\n\n  /**\n   * Keep looking for peaks lowering the threshold until\n   * we have at least 15 peaks (10 seconds @ 90bpm)\n   */\n\n  while (peaks.length < minPeaks && threshold >= minThresold) {\n    peaks = findPeaksAtThreshold(data, threshold);\n    threshold -= 0.05;\n  }\n\n  /**\n   * Too fiew samples are unreliable\n   */\n\n  if (peaks.length < minPeaks) {\n    throw new Error('Could not find enough samples for a reliable detection.');\n  }\n\n  return peaks;\n}\n\n/**\n * Function to identify peaks\n * @param  {Array}  data      Buffer channel data\n * @param  {Number} threshold Threshold for qualifying as a peak\n * @return {Array}            Peaks found that are grater than the threshold\n */\n\nfunction findPeaksAtThreshold(data, threshold) {\n  var peaks = [];\n\n  /**\n   * Identify peaks that pass the threshold, adding them to the collection\n   */\n\n  for (var i = 0, l = data.length; i < l; i += 1) {\n    if (data[i] > threshold) {\n      peaks.push(i);\n\n      /**\n       * Skip forward ~ 1/4s to get past this peak\n       */\n\n      i += 10000;\n    }\n  }\n\n  return peaks;\n}\n\n/**\n * Identify intervals between peaks\n * @param  {Array} peaks Array of qualified peaks\n * @return {Array}       Identifies intervals between peaks\n */\n\nfunction identifyIntervals(peaks) {\n  var intervals = [];\n\n  peaks.forEach(function (peak, index) {\n    var _loop = function _loop(i) {\n      var interval = peaks[index + i] - peak;\n\n      /**\n       * Try and find a matching interval and increase it's count\n       */\n\n      var foundInterval = intervals.some(function (intervalCount) {\n        if (intervalCount.interval === interval) {\n          return intervalCount.count += 1;\n        }\n      });\n\n      /**\n       * Add the interval to the collection if it's unique\n       */\n\n      if (!foundInterval) {\n        intervals.push({\n          interval: interval,\n          count: 1\n        });\n      }\n    };\n\n    for (var i = 0; i < 10; i += 1) {\n      _loop(i);\n    }\n  });\n\n  return intervals;\n}\n\n/**\n * Factory for group reducer\n * @param  {Number} sampleRate Audio sample rate\n * @return {Function}\n */\n\nfunction groupByTempo(sampleRate) {\n\n  /**\n   * Figure out best possible tempo candidates\n   * @param  {Array} intervalCounts List of identified intervals\n   * @return {Array}                Intervals grouped with similar values\n   */\n\n  return function (intervalCounts) {\n    var tempoCounts = [];\n\n    intervalCounts.forEach(function (intervalCount) {\n      if (intervalCount.interval !== 0) {\n        /**\n         * Convert an interval to tempo\n         */\n\n        var theoreticalTempo = 60 / (intervalCount.interval / sampleRate);\n\n        /**\n         * Adjust the tempo to fit within the 90-180 BPM range\n         */\n\n        while (theoreticalTempo < 90) {\n          theoreticalTempo *= 2;\n        }while (theoreticalTempo > 180) {\n          theoreticalTempo /= 2;\n        } /**\n           * Round to legible integer\n           */\n\n        theoreticalTempo = Math.round(theoreticalTempo);\n\n        /**\n         * See if another interval resolved to the same tempo\n         */\n\n        var foundTempo = tempoCounts.some(function (tempoCount) {\n          if (tempoCount.tempo === theoreticalTempo) {\n            return tempoCount.count += intervalCount.count;\n          }\n        });\n\n        /**\n         * Add a unique tempo to the collection\n         */\n\n        if (!foundTempo) {\n          tempoCounts.push({\n            tempo: theoreticalTempo,\n            count: intervalCount.count\n          });\n        }\n      }\n    });\n\n    return tempoCounts;\n  };\n}"},"lineCount":null}},"error":null,"hash":"ddc77b0325caa123a7e24a6a332e36d1","cacheData":{"env":{}}}